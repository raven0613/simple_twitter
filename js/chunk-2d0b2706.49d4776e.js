(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2706"],{"23b1":function(r,o,t){"use strict";t.r(o);var s=function(){var r=this,o=r._self._c;return o("div",{staticClass:"sign-form"},[r._m(0),o("form",{staticClass:"form form__container",on:{submit:function(o){return o.preventDefault(),o.stopPropagation(),r.handleSubmit.apply(null,arguments)},keyup:function(o){return!o.type.indexOf("key")&&r._k(o.keyCode,"enter",13,o.key,"Enter")?null:(o.preventDefault(),o.stopPropagation(),r.handleSubmit.apply(null,arguments))}}},[o("div",{class:["form__input",{formError:r.formErrorAccount||r.formErrorAccountNotExisted||r.formErrorAccountOrPassword}]},[o("div",{staticClass:"form__input__container"},[o("label",{attrs:{for:"account"}},[r._v("帳號")]),o("input",{directives:[{name:"model",rawName:"v-model",value:r.account,expression:"account"}],attrs:{id:"account",name:"account",type:"account",placeholder:"請輸入帳號",autocomplete:"username",autofocus:""},domProps:{value:r.account},on:{input:function(o){o.target.composing||(r.account=o.target.value)}}})]),o("div",{staticClass:"form__input__hint"},[o("span",{directives:[{name:"show",rawName:"v-show",value:r.formErrorAccount,expression:"formErrorAccount"}],staticClass:"form__input__hint-error"},[r._v("帳號欄位為必填")]),o("span",{directives:[{name:"show",rawName:"v-show",value:r.formErrorAccountNotExisted,expression:"formErrorAccountNotExisted"}],staticClass:"form__input__hint-error"},[r._v("帳號不存在")]),o("span",{directives:[{name:"show",rawName:"v-show",value:r.formErrorAccountOrPassword,expression:"formErrorAccountOrPassword"}],staticClass:"form__input__hint-error"},[r._v("帳號或密碼錯誤")])])]),o("div",{class:["form__input",{formError:r.formErrorPassword||r.formErrorAccountOrPassword}]},[o("div",{staticClass:"form__input__container"},[o("label",{attrs:{for:"password"}},[r._v("密碼")]),o("input",{directives:[{name:"model",rawName:"v-model",value:r.password,expression:"password"}],attrs:{id:"password",name:"password",type:"password",placeholder:"請輸入密碼",autocomplete:"current-password",autofocus:""},domProps:{value:r.password},on:{input:function(o){o.target.composing||(r.password=o.target.value)}}})]),o("div",{staticClass:"form__input__hint"},[o("span",{directives:[{name:"show",rawName:"v-show",value:r.formErrorPassword,expression:"formErrorPassword"}],staticClass:"form__input__hint-error"},[r._v("密碼欄位為必填")]),o("span",{directives:[{name:"show",rawName:"v-show",value:r.formErrorAccountOrPassword,expression:"formErrorAccountOrPassword"}],staticClass:"form__input__hint-error"},[r._v("帳號或密碼錯誤")])])]),o("div",{staticClass:"form__button__container"},[o("button",{staticClass:"form__button",attrs:{type:"submit"}},[r._v("登入")]),o("div",{staticClass:"form__links form__links__login"},[o("router-link",{staticClass:"form__links--link",attrs:{to:"/login"}},[r._v("前台登入")])],1)])])])},a=[function(){var r=this,o=r._self._c;return o("div",{staticClass:"entrance entrance__container"},[o("div",{staticClass:"entrance__icon"},[o("img",{attrs:{src:t("1832"),alt:""}})]),o("div",{staticClass:"entrance__title"},[o("h4",[r._v("後台登入")])])])}],n=(t("d9e2"),t("14d9"),t("be6c")),e=t("2fa3"),c={name:"AdminLogin",data(){return{account:"",password:"",formErrorAccount:!1,formErrorPassword:!1,formErrorAccountNotExisted:!1,formErrorAccountOrPassword:!1}},watch:{account(r){this.account=r.trim(),r.length>0&&(this.formErrorAccount=!1)},password(r){this.password=r.trim(),r.length>0&&(this.formErrorPassword=!1)}},methods:{async handleSubmit(){if(this.formErrorAccount=!1,this.formErrorPassword=!1,this.formErrorAccountNotExisted=!1,this.formErrorAccountOrPassword=!1,this.account||(this.formErrorAccount=!0),this.password||(this.formErrorPassword=!0),!this.allFalse)try{const{data:r}=await n["a"].login({account:this.account,password:this.password}),{userData:o}=r;if(console.log("data:",r,o.role),this.formErrorAccount=!1,this.formErrorPassword=!1,this.formErrorAccountNotExisted=!1,this.formErrorAccountOrPassword=!1,"error"===r.status)throw new Error(r.message);localStorage.setItem("token",r.token),this.$store.commit("setCurrentUser",o),e["a"].fire({html:Object(e["c"])("登入成功！","succeed")}),this.$router.push("/admin")}catch(r){const o=r.response.data.message;console.log(r.response),o.includes("帳號或密碼錯誤")?this.formErrorAccountOrPassword=!0:o.includes("帳號不存在")&&(this.formErrorAccountNotExisted=!0)}}},computed:{allFalse(){return!!(this.formErrorAccount||this.formErrorPassword||this.formErrorAccountNotExisted||this.formErrorAccountOrPassword)}}},i=c,u=t("2877"),m=Object(u["a"])(i,s,a,!1,null,null,null);o["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0b2706.49d4776e.js.map