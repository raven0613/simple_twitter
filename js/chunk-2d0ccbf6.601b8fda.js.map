{"version":3,"sources":["webpack:///./src/views/Setting.vue","webpack:///./src/components/SettingPanel.vue","webpack:///src/components/SettingPanel.vue","webpack:///./src/components/SettingPanel.vue?310b","webpack:///./src/components/SettingPanel.vue?e51c","webpack:///src/views/Setting.vue","webpack:///./src/views/Setting.vue?4d6b","webpack:///./src/views/Setting.vue?5205"],"names":["render","_vm","this","_c","_self","staticClass","class","modal__toggled","isModalToggled","attrs","on","handleToggleModal","userData","formErrorAccountExisted","formErrorEmailExisted","isProcessing","handleAfterSubmit","handleCloseModal","_e","enter","leave","$event","stopPropagation","preventDefault","staticRenderFns","handleSubmit","apply","arguments","type","indexOf","_k","keyCode","key","formError","formErrorAccount","_v","directives","name","rawName","value","account","expression","domProps","target","composing","$set","formErrorName","formErrorNameLimited","form__input__count","lengthOfName","_s","formErrorEmail","email","formErrorPassword","formErrorPasswordUnmatched","password","formErrorCheckPassword","checkPassword","form__button_processing","logout","props","initialUserData","default","initialFormErrorAccountExisted","initialFormErrorEmailExisted","data","created","console","watch","handler","newValue","Toast","html","deep","methods","computed","allFalse","component","components","SettingPanel","SideBar","MainHeader","Footer","MainTweetModal","isLoading","userId","formData","history"],"mappings":"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Ae,YACAE,kBAEAX,iBACAK,kBACAjB,oBACAmB,qBACAG,0BACAF,8BACAzC,2BACAC,yBACAiC,wBACAE,kBAGAiB,UACAC,kCACA,kBACA,iBACA,sBAEAA,4BAEAC,OACAxD,UACAyD,WAgBA,GAfAF,2BACAG,qBACAA,2BACAA,uBACAA,6BACAA,uCAGA,gCAEA,kBACA,uBAIA,kBAOA,OANAC,aACAC,wCAEAF,0BACA,kCACAH,uCAGA,6BAGA,mBACA,uBACA,+BAGA,qBACA,yBACA,iCAGA,sBACA,0BACA,oCAGA,2BACA,+BACA,qCAGAM,SAEAZ,mBACA,kBACA,iBACA,IAGAE,kCACA,gCAEAC,gCACA,+BAGAU,SACA,qBA+BA,GA7BA,sBACA,uBACA,yBACA,0BACA,+BACA,mCACA,gCACA,6BACA,6BACA,mCAGA,wBACA,0BAEA,qBACA,uBAEA,sBACA,wBAEA,yBACA,2BAEA,8BACA,gCAIA,qDAKA,OAJA,wCACAH,aACAC,2CAMA,kBAEA,IAEA,SACAhC,8BACAH,wBACAe,0BACAG,gCACAE,2CAEAU,eAEA,6BAGA,sBACA,uBACA,yBACA,0BACA,+BACA,mCACA,gCACA,6BACA,6BAEA,0BACA,+BACA,SAEA,8CAEA,sBACA,gCACA,sBACA,iCAIAR,SACA,2CACA,8BAGAgB,UAEAC,WACA,SACA,oBACA,qBACA,uBACA,wBACA,6BACA,iCACA,8BACA,2BACA,8BCpZsV,I,YCOlVC,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,gFCwBA,GACfxC,eACAyC,YACAC,eACAC,eACAC,kBACAC,cACAC,uBAEAlB,OACA,OACArD,UACAyB,QACAe,SACAZ,YAEAhC,kBACAK,2BACAC,yBACAC,kBAGAmD,UACA,qCAEAS,aACA,kDACAS,YACA,qDAMAV,SACA,mBACA,IACA,WAAAT,SAAA,gBAAAoB,YACA,KAAAhD,QAAAe,UAAAZ,GAAA,EACA,kBACA,cACAH,OACAe,QACAZ,WAGA,SACA+B,aACAC,mDAIA,2BACA,IACA,4BACA,qBAEAL,oBACA,WAAAF,SAAA,sBACAoB,2BACAC,aAGA,sBACA,2BAGAf,aACAC,6CAEA,qBAEA,SACA,8CACA,qBACAL,eACA,sBACA,gCACA,2BACA,+BAGAI,aACAC,mCAIA7D,qBACA,sBACA4E,mBAAAlD,kBAAA,uBAEApB,oBACA,uBAEA,GACA,uBCzIiV,ICO7U,EAAY,eACd,EACAjB,EACAwB,GACA,EACA,KACA,KACA,MAIa,e","file":"js/chunk-2d0ccbf6.601b8fda.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"twitter__project\",class:{modal__toggled: _vm.isModalToggled}},[_c('div',{staticClass:\"container setting-page\"},[_c('section',{staticClass:\"left__container\"},[_c('SideBar',{attrs:{\"current-page\":`setting`,\"ini-is-modal-toggled\":_vm.isModalToggled},on:{\"after-toggle-modal\":_vm.handleToggleModal}})],1),_c('main',{staticClass:\"main__container\"},[_c('MainHeader',{attrs:{\"content\":`帳戶設定`}}),_c('div',{staticClass:\"tweets__container\"},[_c('SettingPanel',{attrs:{\"initialUserData\":_vm.userData,\"initialFormErrorAccountExisted\":_vm.formErrorAccountExisted,\"initialFormErrorEmailExisted\":_vm.formErrorEmailExisted,\"is-processing\":_vm.isProcessing},on:{\"after-submit\":_vm.handleAfterSubmit}})],1),_c('transition',{attrs:{\"name\":\"modal\"}},[(_vm.isModalToggled)?_c('MainTweetModal',{on:{\"after-submit-close\":_vm.handleCloseModal}}):_vm._e()],1)],1),_c('section',{staticClass:\"right__container\"}),_c('transition',{attrs:{\"duration\":{ enter: 350, leave: 150 }}},[(_vm.isModalToggled)?_c('div',{staticClass:\"modal__mask\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleCloseModal(false)}}}):_vm._e()])],1),_c('Footer',{attrs:{\"current-page\":`setting`,\"ini-is-modal-toggled\":_vm.isModalToggled},on:{\"after-toggle-modal\":_vm.handleToggleModal}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"setting-form\"},[_c('form',{staticClass:\"form form__container\",on:{\"submit\":function($event){$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit.apply(null, arguments)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;$event.preventDefault();$event.stopPropagation();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{class:[\n        'form__input',\n        { formError: _vm.formErrorAccount || _vm.formErrorAccountExisted },\n      ]},[_c('div',{staticClass:\"form__input__container\"},[_c('label',{attrs:{\"for\":\"account\"}},[_vm._v(\"帳號\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userData.account),expression:\"userData.account\"}],attrs:{\"id\":\"account\",\"name\":\"account\",\"type\":\"account\",\"placeholder\":\"請輸入帳號\",\"autocomplete\":\"username\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.userData.account)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.userData, \"account\", $event.target.value)}}})]),_c('div',{staticClass:\"form__input__hint\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorAccount),expression:\"formErrorAccount\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"帳號欄位為必填\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorAccountExisted),expression:\"formErrorAccountExisted\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"此帳號已重複註冊\")])])]),_c('div',{class:[\n        'form__input',\n        { formError: _vm.formErrorName || _vm.formErrorNameLimited },\n      ]},[_c('div',{staticClass:\"form__input__container\"},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"名稱\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userData.name),expression:\"userData.name\"}],attrs:{\"id\":\"name\",\"name\":\"name\",\"type\":\"name\",\"placeholder\":\"請輸入使用者名稱\",\"autocomplete\":\"name\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.userData.name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.userData, \"name\", $event.target.value)}}})]),_c('div',{class:[\n          'form__input__hint',\n          {\n            form__input__count:\n              !_vm.formErrorName && !_vm.formErrorNameLimited && _vm.lengthOfName,\n          },\n        ]},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorName),expression:\"formErrorName\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"名稱欄位為必填\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorNameLimited),expression:\"formErrorNameLimited\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"字數超過上限！\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.lengthOfName),expression:\"lengthOfName\"}],staticClass:\"form__input__hint-length montserrat-font\"},[_vm._v(_vm._s(_vm.lengthOfName)+\"/50\")])])]),_c('div',{class:[\n        'form__input',\n        { formError: _vm.formErrorEmail || _vm.formErrorEmailExisted },\n      ]},[_c('div',{staticClass:\"form__input__container\"},[_c('label',{attrs:{\"for\":\"email\"}},[_vm._v(\"Email\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userData.email),expression:\"userData.email\"}],attrs:{\"id\":\"email\",\"name\":\"email\",\"type\":\"email\",\"placeholder\":\"請輸入Email\",\"autocomplete\":\"email\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.userData.email)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.userData, \"email\", $event.target.value)}}})]),_c('div',{staticClass:\"form__input__hint\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorEmail),expression:\"formErrorEmail\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"Email欄位為必填\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorEmailExisted),expression:\"formErrorEmailExisted\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"此Email已重複註冊\")])])]),_c('div',{class:[\n        'form__input',\n        { formError: _vm.formErrorPassword || _vm.formErrorPasswordUnmatched },\n      ]},[_c('div',{staticClass:\"form__input__container\"},[_c('label',{attrs:{\"for\":\"password\"}},[_vm._v(\"密碼\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userData.password),expression:\"userData.password\"}],attrs:{\"id\":\"password\",\"name\":\"password\",\"type\":\"password\",\"placeholder\":\"請輸入密碼\",\"autocomplete\":\"current-password\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.userData.password)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.userData, \"password\", $event.target.value)}}})]),_c('div',{staticClass:\"form__input__hint\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorPassword),expression:\"formErrorPassword\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"密碼欄位為必填\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorPasswordUnmatched),expression:\"formErrorPasswordUnmatched\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"密碼與確認密碼不符\")])])]),_c('div',{class:[\n        'form__input',\n        { formError: _vm.formErrorCheckPassword || _vm.formErrorPasswordUnmatched },\n      ]},[_c('div',{staticClass:\"form__input__container\"},[_c('label',{attrs:{\"for\":\"passwordCheck\"}},[_vm._v(\"密碼確認\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userData.checkPassword),expression:\"userData.checkPassword\"}],attrs:{\"id\":\"passwordCheck\",\"name\":\"checkPassword\",\"type\":\"password\",\"placeholder\":\"請再次輸入密碼\",\"autocomplete\":\"current-password\",\"autofocus\":\"\"},domProps:{\"value\":(_vm.userData.checkPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.userData, \"checkPassword\", $event.target.value)}}})]),_c('div',{staticClass:\"form__input__hint\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorCheckPassword),expression:\"formErrorCheckPassword\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"密碼確認欄位為必填\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.formErrorPasswordUnmatched),expression:\"formErrorPasswordUnmatched\"}],staticClass:\"form__input__hint-error\"},[_vm._v(\"密碼與確認密碼不符\")])])]),_c('div',{staticClass:\"form__button__container\"},[_c('button',{staticClass:\"form__button\",class:{ form__button_processing: _vm.isProcessing },attrs:{\"type\":\"submit\"}},[_vm._v(\" 儲存 \")]),_c('div',{staticClass:\"form__links form__links__logout\"},[_c('div',{staticClass:\"form__links--link\",on:{\"click\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.logout.apply(null, arguments)}}},[_vm._v(\"登出\")])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"setting-form\">\n    <!-- 輸入表格 -->\n    <form\n      @submit.prevent.stop=\"handleSubmit\"\n      @keyup.enter.prevent.stop=\"handleSubmit\"\n      class=\"form form__container\"\n    >\n      <div\n        :class=\"[\n          'form__input',\n          { formError: formErrorAccount || formErrorAccountExisted },\n        ]\"\n      >\n        <div class=\"form__input__container\">\n          <label for=\"account\">帳號</label>\n          <input\n            id=\"account\"\n            name=\"account\"\n            type=\"account\"\n            placeholder=\"請輸入帳號\"\n            autocomplete=\"username\"\n            autofocus\n            v-model=\"userData.account\"\n          />\n        </div>\n        <div class=\"form__input__hint\">\n          <span class=\"form__input__hint-error\" v-show=\"formErrorAccount\"\n            >帳號欄位為必填</span\n          >\n          <span class=\"form__input__hint-error\" v-show=\"formErrorAccountExisted\"\n            >此帳號已重複註冊</span\n          >\n        </div>\n      </div>\n\n      <div\n        :class=\"[\n          'form__input',\n          { formError: formErrorName || formErrorNameLimited },\n        ]\"\n      >\n        <div class=\"form__input__container\">\n          <label for=\"name\">名稱</label>\n          <input\n            id=\"name\"\n            name=\"name\"\n            type=\"name\"\n            placeholder=\"請輸入使用者名稱\"\n            autocomplete=\"name\"\n            autofocus\n            v-model=\"userData.name\"\n          />\n        </div>\n        <div\n          :class=\"[\n            'form__input__hint',\n            {\n              form__input__count:\n                !formErrorName && !formErrorNameLimited && lengthOfName,\n            },\n          ]\"\n        >\n          <span class=\"form__input__hint-error\" v-show=\"formErrorName\"\n            >名稱欄位為必填</span\n          >\n          <span class=\"form__input__hint-error\" v-show=\"formErrorNameLimited\"\n            >字數超過上限！</span\n          >\n          <span\n            class=\"form__input__hint-length montserrat-font\"\n            v-show=\"lengthOfName\"\n            >{{ lengthOfName }}/50</span\n          >\n        </div>\n      </div>\n\n      <div\n        :class=\"[\n          'form__input',\n          { formError: formErrorEmail || formErrorEmailExisted },\n        ]\"\n      >\n        <div class=\"form__input__container\">\n          <label for=\"email\">Email</label>\n          <input\n            id=\"email\"\n            name=\"email\"\n            type=\"email\"\n            placeholder=\"請輸入Email\"\n            autocomplete=\"email\"\n            autofocus\n            v-model=\"userData.email\"\n          />\n        </div>\n        <div class=\"form__input__hint\">\n          <span class=\"form__input__hint-error\" v-show=\"formErrorEmail\"\n            >Email欄位為必填</span\n          >\n          <span class=\"form__input__hint-error\" v-show=\"formErrorEmailExisted\"\n            >此Email已重複註冊</span\n          >\n        </div>\n      </div>\n\n      <div\n        :class=\"[\n          'form__input',\n          { formError: formErrorPassword || formErrorPasswordUnmatched },\n        ]\"\n      >\n        <div class=\"form__input__container\">\n          <label for=\"password\">密碼</label>\n          <input\n            id=\"password\"\n            name=\"password\"\n            type=\"password\"\n            placeholder=\"請輸入密碼\"\n            autocomplete=\"current-password\"\n            autofocus\n            v-model=\"userData.password\"\n          />\n        </div>\n        <div class=\"form__input__hint\">\n          <span class=\"form__input__hint-error\" v-show=\"formErrorPassword\"\n            >密碼欄位為必填</span\n          >\n          <span\n            class=\"form__input__hint-error\"\n            v-show=\"formErrorPasswordUnmatched\"\n            >密碼與確認密碼不符</span\n          >\n        </div>\n      </div>\n\n      <div\n        :class=\"[\n          'form__input',\n          { formError: formErrorCheckPassword || formErrorPasswordUnmatched },\n        ]\"\n      >\n        <div class=\"form__input__container\">\n          <label for=\"passwordCheck\">密碼確認</label>\n          <input\n            id=\"passwordCheck\"\n            name=\"checkPassword\"\n            type=\"password\"\n            placeholder=\"請再次輸入密碼\"\n            autocomplete=\"current-password\"\n            autofocus\n            v-model=\"userData.checkPassword\"\n          />\n        </div>\n        <div class=\"form__input__hint\">\n          <span class=\"form__input__hint-error\" v-show=\"formErrorCheckPassword\"\n            >密碼確認欄位為必填</span\n          >\n          <span\n            class=\"form__input__hint-error\"\n            v-show=\"formErrorPasswordUnmatched\"\n            >密碼與確認密碼不符</span\n          >\n        </div>\n      </div>\n\n      <!-- button們 -->\n      <div class=\"form__button__container\">\n        <button\n          class=\"form__button\"\n          :class=\"{ form__button_processing: isProcessing }\"\n          type=\"submit\"\n        >\n          儲存\n        </button>\n        <div class=\"form__links form__links__logout\">\n          <div\n            @click.stop.prevent=\"logout\"\n            class=\"form__links--link\"\n            >登出</div\n          >\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { Toast, innerHtml } from \"../utils/helpers\";\n\nexport default {\n  name: \"SettingPanel\",\n  props: {\n    initialUserData: {\n      type: Object,\n      default: () => ({\n        name: \"\",\n        email: \"\",\n        account: \"\",\n      }),\n    },\n    initialFormErrorAccountExisted: {\n      type: Boolean,\n      default: false,\n    },\n    initialFormErrorEmailExisted: {\n      type: Boolean,\n      default: false,\n    },\n    isProcessing: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      userData: {\n        name: \"\",\n        email: \"\",\n        account: \"\",\n        password: \"\",\n        checkPassword: \"\",\n      },\n      formErrorName: false,\n      formErrorEmail: false,\n      formErrorAccount: false,\n      formErrorPassword: false,\n      formErrorCheckPassword: false,\n      formErrorPasswordUnmatched: false,\n      formErrorAccountExisted: false,\n      formErrorEmailExisted: false,\n      formErrorNameLimited: false,\n      lengthOfName: \"\",\n    };\n  },\n  created() {\n    console.log(this.initialUserData);\n    this.userData = {\n      ...this.userData,\n      ...this.initialUserData,\n    };\n    console.log(this.userData);\n  },\n  watch: {\n    userData: {\n      handler(newValue) {\n        console.log(newValue.name.length);\n        newValue.name = newValue.name.trim();\n        newValue.account = newValue.account.trim();\n        newValue.email = newValue.email.trim();\n        newValue.password = newValue.password.trim();\n        newValue.checkPassword = newValue.checkPassword.trim();\n\n        // 計算目前輸入的字數\n        this.lengthOfName = newValue.name.length;\n\n        if (newValue.name.length > 0) {\n          this.formErrorName = false;\n        }\n\n        // name 字數限制在50字以內，若超過會有錯誤提示「字數超過上限！」\n        if (newValue.name.length >= 50) {\n          Toast.fire({\n            html: innerHtml(\"字數超過上限\", \"error\"),\n          });\n          newValue.name = newValue.name.slice(0, 50); // name會停留在50字內\n          this.formErrorNameLimited = true;\n          console.log(this.formErrorNameLimited);\n          return;\n        } else {\n          this.formErrorNameLimited = false;\n        }\n\n        if (newValue.email.length > 0) {\n          this.formErrorEmail = false;\n          this.formErrorEmailExisted = false;\n        }\n\n        if (newValue.account.length > 0) {\n          this.formErrorAccount = false;\n          this.formErrorAccountExisted = false;\n        }\n\n        if (newValue.password.length > 0) {\n          this.formErrorPassword = false;\n          this.formErrorPasswordUnmatched = false;\n        }\n\n        if (newValue.checkPassword.length > 0) {\n          this.formErrorCheckPassword = false;\n          this.formErrorPasswordUnmatched = false;\n        }\n      },\n      deep: true,\n    },\n    initialUserData(newValue) {\n      this.userData = {\n        ...this.userData,\n        ...newValue,\n      };\n    },\n    initialFormErrorAccountExisted(newValue) {\n      this.formErrorAccountExisted = newValue;\n    },\n    initialFormErrorEmailExisted(newValue) {\n      this.formErrorEmailExisted = newValue;\n    },\n  },\n  methods: {\n    async handleSubmit() {\n      // 當按下按鈕後，所有底線為黑/藍線\n        this.formErrorName = false;\n        this.formErrorEmail = false;\n        this.formErrorAccount = false;\n        this.formErrorPassword = false;\n        this.formErrorCheckPassword = false;\n        this.formErrorPasswordUnmatched = false;\n        this.formErrorAccountExisted = false;\n        this.formErrorNameExisted = false;\n        this.formErrorNameLimited = false;\n        this.formErrorPasswordUnmatched = false;\n\n        // 每一個欄位都是必填，若有欄位為空會有錯誤提示「該項目為必填」，錯誤底線就為紅色\n        if (!this.userData.account) {\n          this.formErrorAccount = true;\n        }\n        if (!this.userData.name) {\n          this.formErrorName = true;\n        }\n        if (!this.userData.email) {\n          this.formErrorEmail = true;\n        }\n        if (!this.userData.password) {\n          this.formErrorPassword = true;\n        }\n        if (!this.userData.checkPassword) {\n          this.formErrorCheckPassword = true;\n        }\n\n        // 當使用者密碼與確認密碼不相同會有錯誤提示「密碼與確認密碼不符」，兩欄都呈現紅線\n        if (this.userData.password !== this.userData.checkPassword) {\n          this.formErrorPasswordUnmatched = true;\n          Toast.fire({\n            html: innerHtml(\"密碼與確認密碼不符\", \"error\"),\n          });\n          return;\n        }\n\n        // 只要狀態有報錯，就不會發請求給後端，避免一直重複發送請求\n      if (this.allFalse) return;\n\n      try {\n        // 把表單資料打包給後端\n        const formData = {\n          account: this.userData.account,\n          name: this.userData.name,\n          email: this.userData.email,\n          password: this.userData.password,\n          checkPassword: this.userData.checkPassword,\n        };\n        console.log(formData);\n\n        this.$emit(\"after-submit\", formData);\n\n        // 成功取得資料，所有底線為黑/藍線\n        this.formErrorName = false;\n        this.formErrorEmail = false;\n        this.formErrorAccount = false;\n        this.formErrorPassword = false;\n        this.formErrorCheckPassword = false;\n        this.formErrorPasswordUnmatched = false;\n        this.formErrorAccountExisted = false;\n        this.formErrorNameExisted = false;\n        this.formErrorNameLimited = false;\n\n        this.userData.password = \"\";\n        this.userData.checkPassword = \"\";\n      } catch (error) {\n        // 想要拿到data.message，要知道是包在error.response裡\n        const message = error.response.data.message.toLowerCase();\n\n        if (message.includes(\"account\")) {\n          this.formErrorAccountExisted = true;\n        } else if (message.includes(\"email\")) {\n          this.formErrorEmailExisted = true;\n        }\n      }\n    },\n    logout() {\n      this.$store.commit(\"revokeAuthentication\");\n      this.$router.push(\"/login\");\n    },\n  },\n  computed: {\n    // 只要狀態有報錯，就不會發請求給後端，避免一直重複發送請求\n    allFalse() {\n      if (\n        this.formErrorName ||\n        this.formErrorEmail ||\n        this.formErrorAccount ||\n        this.formErrorPassword ||\n        this.formErrorCheckPassword ||\n        this.formErrorPasswordUnmatched ||\n        this.formErrorAccountExisted ||\n        this.formErrorNameExisted ||\n        this.formErrorNameLimited \n      ) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SettingPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SettingPanel.vue?vue&type=template&id=d21dce0a&\"\nimport script from \"./SettingPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./SettingPanel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"twitter__project\" :class=\"{modal__toggled: isModalToggled}\">\n    <div class=\"container setting-page\">\n      <section class=\"left__container\">\n        <SideBar :current-page=\"`setting`\" :ini-is-modal-toggled=\"isModalToggled\"\n          @after-toggle-modal=\"handleToggleModal\" />\n      </section>\n      <main class=\"main__container\">\n        <MainHeader :content=\"`帳戶設定`\" />\n        <div class=\"tweets__container\">\n          <!-- 設定面板 -->\n          <SettingPanel :initialUserData=\"userData\" :initialFormErrorAccountExisted=\"formErrorAccountExisted\"\n            :initialFormErrorEmailExisted=\"formErrorEmailExisted\" :is-processing=\"isProcessing\"\n            @after-submit=\"handleAfterSubmit\" />\n        </div>\n        <!-- 發新推文窗 -->\n        <transition name=\"modal\">\n          <MainTweetModal v-if=\"isModalToggled\" @after-submit-close=\"handleCloseModal\" />\n        </transition>\n\n      </main>\n      <section class=\"right__container\">\n      </section>\n      <transition :duration=\"{ enter: 350, leave: 150 }\">\n        <div class=\"modal__mask\" @click.stop.prevent=\"handleCloseModal(false)\" v-if=\"isModalToggled\">\n        </div>\n      </transition>\n\n    </div>\n    <Footer :current-page=\"`setting`\" :ini-is-modal-toggled=\"isModalToggled\" @after-toggle-modal=\"handleToggleModal\" />\n  </div>\n</template>\n<script>\nimport SettingPanel from './../components/SettingPanel'\nimport SideBar from '../components/SideBar.vue'\nimport MainHeader from '../components/MainHeader.vue'\nimport MainTweetModal from '../components/MainTweetModal.vue'\nimport Footer from '../components/Footer.vue'\nimport usersAPI from \"../apis/users\";\nimport { Toast, innerHtml } from \"../utils/helpers\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  name: \"Setting\",\n  components: {\n    SettingPanel,\n    SideBar,\n    MainHeader,\n    Footer,\n    MainTweetModal\n  },\n  data() {\n    return {\n      userData: {\n        name: \"\",\n        email: \"\",\n        account: \"\"\n      },\n      isModalToggled: false,\n      formErrorAccountExisted: false,\n      formErrorEmailExisted: false,\n      isProcessing: false\n    }\n  },\n  created() {\n    this.fetchUser(this.currentUser.id)\n  },\n  computed: {\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\n    isLoading() {\n      if (!this.isUserLoading && !this.isTweetLoading) {\n        return false;\n      }\n      return true;\n    },\n  },\n  methods: {\n    async fetchUser(userId) {\n      try {\n        const { data } = await usersAPI.getUser({ userId });\n        const { name, email, account } = data\n        this.userData = {\n          ...this.userData,\n          name,\n          email,\n          account\n        }\n\n      } catch (error) {\n        Toast.fire({\n          html: innerHtml('無法取得使用者資料，請稍後再試', 'error')\n        });\n      }\n    },\n    async handleAfterSubmit(formData) {\n      try {\n        if (this.isProcessing) return\n        this.isProcessing = true\n\n        console.log('hi', formData)\n        const { data } = await usersAPI.updateSetting({\n          userId: this.currentUser.id,\n          formData\n        })\n\n        if (data.status === 'error') {\n          throw new Error(data.message)\n        }\n\n        Toast.fire({\n          html: innerHtml('成功更新使用者資料', 'succeed')\n        })\n        this.isProcessing = false\n\n      } catch (error) {\n        const message = error.response.data.message.toLowerCase();\n        this.isProcessing = false\n        console.log(message)\n        if (message.includes(\"此帳號已被使用\")) {\n          this.formErrorAccountExisted = true;\n        } else if (message.includes(\"此email已被使用\")) {\n          this.formErrorEmailExisted = true;\n        }\n\n        Toast.fire({\n          html: innerHtml(message, 'error')\n        })\n      }\n    },\n    handleToggleModal(isModalToggled) {\n      this.isModalToggled = isModalToggled\n      history.pushState({ name: \"new-tweet\" }, null, \"/#/tweets/new\");\n    },\n    handleCloseModal(isSubmitted) {\n      this.isModalToggled = false\n      //如果不是在submit後回傳的關掉，就可以直接回上一頁\n      if (!isSubmitted) {\n        this.$router.back()\n      }\n    },\n  }\n\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Setting.vue?vue&type=template&id=6dc4d68f&\"\nimport script from \"./Setting.vue?vue&type=script&lang=js&\"\nexport * from \"./Setting.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}