(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16c6b58a"],{"2b28":function(t,e,s){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home__tabs"},[t.userId?e("section",{staticClass:"home__tabs--panel__container"},[e("div",{staticClass:"home__tab home__tab--user",class:{active:"tweet"===t.currentTab},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleClickTab("tweet")}}},[t._v("推文")]),e("div",{staticClass:"home__tab home__tab--user",class:{active:"reply"===t.currentTab},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleClickTab("reply")}}},[t._v("回覆")]),e("div",{staticClass:"home__tab home__tab--user",class:{active:"like"===t.currentTab},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleClickTab("like")}}},[t._v("喜歡的內容")])]):e("section",[e("router-link",{staticClass:"home__tab home__tab--follow",class:{active:"follower"===t.currentTab},attrs:{to:{name:"user-follower"}},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleClickTab("follower")}}},[t._v("追隨者")]),e("router-link",{staticClass:"home__tab home__tab--follow",class:{active:"following"===t.currentTab},attrs:{to:{name:"user-follower"}},nativeOn:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleClickTab("following")}}},[t._v("正在追隨")])],1)])},a=[],r={props:{userId:{type:Number},clickedTab:{type:String}},computed:{currentTab(){return this.clickedTab}},methods:{handleClickTab(t){this.$emit("after-click-tab",t)}}},i=r,l=s("2877"),n=Object(l["a"])(i,o,a,!1,null,null,null);e["a"]=n.exports},"3e69":function(t,e,s){"use strict";var o=function(){var t=this,e=t._self._c;return e("header",{staticClass:"header user__header"},[e("div",{staticClass:"user__header--icon",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.$router.back()}}},[e("img",{attrs:{src:s("64a2"),alt:""}})]),t.counts?e("div",{staticClass:"user__header--word"},[e("h5",[t._v(t._s(t.content))]),e("p",[t._v(t._s(t.counts)+" 推文")])]):t._e(),isNaN(t.counts)?e("div",{staticClass:"user__header--title"},[e("h4",[t._v(t._s(t.content))])]):t._e()])},a=[],r={props:{content:{type:String},counts:{type:Number},isTweetModal:{type:Boolean,default:!1},isReplyModal:{type:Boolean,default:!1}}},i=r,l=s("2877"),n=Object(l["a"])(i,o,a,!1,null,null,null);e["a"]=n.exports},"99b5":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"twitter__project",class:{modal__toggled:t.isModalToggled}},[e("div",{staticClass:"container"},[e("section",{staticClass:"left__container"},[e("SideBar",{attrs:{"current-page":"user","ini-is-modal-toggled":t.isModalToggled},on:{"after-toggle-modal":t.handleToggleModal}})],1),e("main",{staticClass:"main__container"},[e("transition",{attrs:{name:"modal"}},[t.isModalToggled?e("MainTweetModal",{on:{"after-submit-close":t.handleCloseModal}}):t._e()],1),e("UserHeader",{attrs:{content:t.currentUser.name,counts:25}}),e("HomeTabs",{attrs:{"clicked-tab":t.currentTab},on:{"after-click-tab":t.handleClickTab}}),t.isLoading?e("Spinner"):["follower"===t.currentTab?e("div",{staticClass:"tweets__container"},["follower"!==t.currentTab||t.followers.length?t._e():e("p",[t._v("目前還沒有追隨者喔")]),t._l(t.followers,(function(t){return e("UserFollowCard",{key:t.id,attrs:{"init-follower":t}})}))],2):t._e(),"following"===t.currentTab?e("div",{staticClass:"tweets__container"},["following"!==t.currentTab||t.followings.length?t._e():e("p",[t._v("目前還沒有追隨任何人喔")]),t._l(t.followings,(function(t){return e("UserFollowCard",{key:t.id,attrs:{"init-follower":t}})}))],2):t._e()]],2),e("section",{staticClass:"right__container"},[e("RecommendUsers")],1),e("transition",{attrs:{duration:{enter:350,leave:150}}},[t.isModalToggled?e("div",{staticClass:"modal__mask",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.handleCloseModal.apply(null,arguments)}}}):t._e()])],1),e("Footer",{attrs:{"current-page":"user","ini-is-modal-toggled":t.isModalToggled},on:{"after-toggle-modal":t.handleToggleModal}})],1)},a=[],r=s("7c08"),i=s("88fd"),l=s("3e69"),n=function(){var t=this,e=t._self._c;return e("router-link",{staticClass:"follow-user",attrs:{to:{name:"user-detail",params:{id:t.user.id},query:{tab:"tweet"}}}},[e("div",{staticClass:"tweet__avatar"},[e("img",{staticClass:"tweet__avatar--photo",attrs:{src:t._f("emptyImage")(t.user.profilePhoto),alt:""}})]),e("div",{staticClass:"tweet__info"},[e("div",{staticClass:"follow-user__info"},[e("span",[t._v(t._s(t.user.name))]),t.user.id!==t.currentUser.id?e("div",[t.user.isFollowed?e("button",{staticClass:"primbutton primbutton__followed",class:{primbutton__followed_processing:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteFollowship(t.user.id)}}},[t._v("取消跟隨")]):e("button",{staticClass:"primbutton primbutton__unfollowed",class:{primbutton__unfollowed_processing:t.isProcessing},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addFollowship(t.user.id)}}},[t._v("跟隨")])]):t._e()]),e("div",{staticClass:"follow-user__description"},[t._v(" "+t._s(t.user.introduction)+" ")])])])},c=[],u=(s("d9e2"),s("8845")),d=s("2fa3"),h=s("2708"),f=s("2f62"),g={props:{initFollower:{type:Object}},mixins:[h["b"]],data(){return{user:this.initFollower,isProcessing:!1}},watch:{initFollower(t){this.user={...this.user,...t}}},computed:{...Object(f["b"])(["currentUser","isAuthenticated"])},methods:{async addFollowship(t){if(t===this.currentUser.id)return d["a"].fire({html:Object(d["c"])("無法追蹤自己","error")});try{if(this.isProcessing)return;this.isProcessing=!0;const e=await u["a"].addFollowship({id:t});if(console.log(e),200!==e.status)throw new Error(e.data.message);this.user={...this.user,isFollowed:!0},this.$emit("after-like-user",this.user),this.isProcessing=!1}catch(e){const t=e.response.data.message;return this.isProcessing=!1,console.log(t),d["a"].fire({html:Object(d["c"])(t,"error")})}},async deleteFollowship(t){try{if(this.isProcessing)return;this.isProcessing=!0;const e=await u["a"].deleteFollowship({followingId:t});if(200!==e.status)throw new Error(e.data.message);this.user={...this.user,isFollowed:!1},this.$emit("after-like-user",this.user),this.isProcessing=!1}catch(e){const t=e.response.data.message;return this.isProcessing=!1,console.log(t),d["a"].fire({html:Object(d["c"])(t,"error")})}}}},_=g,w=s("2877"),p=Object(w["a"])(_,n,c,!1,null,null,null),b=p.exports,m=s("6b2a"),v=s("2b28"),T=s("fd2d"),C=s("4cce"),k=s("2375"),F={components:{SideBar:r["a"],RecommendUsers:i["a"],UserHeader:l["a"],MainTweetModal:m["a"],UserFollowCard:b,HomeTabs:v["a"],Footer:T["a"],Spinner:k["a"]},data(){return{userId:"",followers:[],followings:[],isModalToggled:!1,isLoading:!0,currentTab:"follower"}},created(){const{id:t}=this.$route.params;this.userId=t,this.getUrl(),"follower"===this.currentTab?this.fetchFollower(t):"following"===this.currentTab&&this.fetchFollowing(t)},beforeRouteUpdate(t,e,s){this.isLoading=!0;const{id:o}=t.params;this.getUrl(),"follower"===this.currentTab?this.fetchFollower(o):"following"===this.currentTab&&this.fetchFollowing(o),s()},computed:{...Object(f["b"])(["currentUser","isAuthenticated"])},methods:{async fetchFollower(t){try{this.isLoading=!0;const{data:e}=await C["a"].getUserFollowrs({userId:t});this.followers=[...e],this.isLoading=!1}catch(e){console.log(e.message),this.isLoading=!1,d["a"].fire({html:Object(d["c"])("無法取得追隨者清單，請稍後再試","error")})}},async fetchFollowing(t){try{this.isLoading=!0;const{data:e}=await C["a"].getUserFollowings({userId:t});this.followings=[...e],this.isLoading=!1}catch(e){console.log(e.message),this.isLoading=!1,d["a"].fire({html:Object(d["c"])("無法取得追隨者清單，請稍後再試","error")})}},handleToggleModal(t){this.isModalToggled=t,history.pushState({name:"new-tweet"},null,"/#/tweets/new")},handleCloseModal(){this.isModalToggled=!1},handleClickTab(t){this.currentTab=t,"follower"===t?(this.fetchFollower(this.userId),history.replaceState({name:"user-follower"},null,`/#/users/${this.userId}/follower`)):"following"===t&&(this.fetchFollowing(this.userId),history.replaceState({name:"user-following"},null,`/#/users/${this.userId}/following`))},getUrl(){console.log(this.$route.matched[0]),"user-follower"===this.$route.matched[0].name?this.currentTab="follower":"user-following"===this.$route.matched[0].name&&(this.currentTab="following")}}},y=F,P=Object(w["a"])(y,o,a,!1,null,null,null);e["default"]=P.exports}}]);
//# sourceMappingURL=chunk-16c6b58a.8871f534.js.map